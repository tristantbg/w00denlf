var rvlAction=function(){var r={};return r.init=function(){$(".topbar").append('<div class="rvl-action"><i class="fa fa-toggle-off"></i></div>'),null!==localStorage.getItem("rvl-active")&&rvlAction.setActive(),$(".rvl-action").click(function(r){r.preventDefault(),$(".bars").hasClass("rvl-active")?rvlAction.setInactive():rvlAction.setActive(),$(window).trigger("resize"),$("body").disableSelection(),rvlTrigger.refresh()})},r.setActive=function(){$(".bars").addClass("rvl-active"),$(".rvl-action").html('<i class="fa fa-toggle-on"></i>'),localStorage.setItem("rvl-active","1")},r.setInactive=function(){$(".bars").removeClass("rvl-active"),$(".rvl-action").html('<i class="fa fa-toggle-off"></i>'),localStorage.removeItem("rvl-active")},r}(),rvlMessage=function(){var r={};return r.activate=function(){$(".rvl-notify").css("top",0),setTimeout(function(){$(".rvl-notify").stop().animate({top:-24},{duration:500})},2e3)},r}();!function(r){r.fn.reveal=function(){return this.each(function(){var t=r(this);if(t.data("reveal"))return!0;t.data("reveal",!0),0!=t.data("refresh")&&rvlTrigger.init(t),rvlAction.init(),rvlScroll.init(null)})}}(jQuery);var rvlScroll=function(){var r={},t=null;return r.init=function(e,l){t=l,r.onLoad()},r.gotoScroll=function(){null!==localStorage.getItem("rvl-scroll")&&$(".rvl-iframe iframe").contents().scrollTop(parseInt(localStorage.getItem("rvl-scroll")))},r.onScroll=function(){$(".rvl-iframe iframe").contents().scroll(function(){r.clearScrollTimer(),r.setScrollTimer()})},r.clearScrollTimer=function(){t&&(clearTimeout(t),t=null)},r.setScrollTimer=function(){t=setTimeout(function(){r.setScroll()},2e3)},r.setScroll=function(){localStorage.setItem("rvl-scroll",r.getScroll())},r.getScroll=function(){return $(".rvl-iframe iframe:last-child").contents().scrollTop()},r.onLoad=function(){$(".rvl-iframe iframe").load(function(){r.gotoScroll(),r.onScroll(),$(this).unbind()})},r}(),rvlTrigger=function(){var r={},t=0,e=null,l=0,i=!1;return r.init=function(r){l=r.data("refresh"),rvlTrigger.events(r)},r.events=function(t){$(".field input, .field textarea").blur(function(t){$(".bars").hasClass("rvl-active")&&0==i&&r.refresh()}),$('.field-content input[type="checkbox"], .field-content input[type="radio"]').click(function(t){$(".bars").hasClass("rvl-active")&&(r.trigger(!0),r.refresh(),i=!1)}),$(".field-content select").change(function(t){$(".bars").hasClass("rvl-active")&&(r.trigger(!0),r.refresh(),i=!1)}),$(".field-content input, .field-content textarea").on("input propertychange",function(){$(".bars").hasClass("rvl-active")&&(r.trigger(!0),r.cases(),$(this).focus())})},r.trigger=function(r){i=r,$(".field-content input, .field-content textarea").trigger("blur")},r.cases=function(){e&&(clearTimeout(e),e=null),t>$.now()?e=setTimeout(function(){r.cases()},l):(t=$.now()+l,r.refresh(),i=!1)},r.refresh=function(){rvlScroll.setScroll(),rvlTrigger.reloadIframe()},r.reloadIframe=function(){var r=$(".rvl-iframe iframe:last-child").attr("src"),t=$(".rvl-iframe iframe:last-child").contents().scrollTop();$(".rvl-iframe iframe:first-child").attr("src",r).load(function(){$(".rvl-iframe iframe:first-child").before($(".rvl-iframe iframe:last-child")),$(".rvl-iframe iframe").contents().scrollTop(t),rvlScroll.onScroll(),rvlMessage.activate(),$(this).unbind()})},r}();